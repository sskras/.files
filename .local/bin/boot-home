#! /usr/bin/env sh

# SPDX-License-Identifier: BlueOak-1.0.0
# SPDX-FileCopyrightText: 2023 Saulius Krasuckas <saulius2_at_ar-fi_point_lt> | sskras

# Bootstrap tools & shell environment to manage home-dir and its' dot-files.

DEPS="git make"

# 0, Fail early:
set -e

# 1, Detect if some tools are missing, e.g. git, make.

for CMD in ${DEPS}; do
    if ! command -v ${CMD} >/dev/null; then
        MISSING="${MISSING} ${CMD}"
        RET=$((RET + 1))
    fi
done

if [ -n "${MISSING}" ]; then
    # In case they are, ask user to install them:
    echo "Missing:${MISSING}"
    # Maybe suggest running the right script as root, e.g:
    # https://github.com/saukrs/linux-tools/blob/4a7ea6000866123a41178465b1204e478a2c3820/steps--1-bootstrap#L9-L18
    exit $RET
fi

# 2, Deploy the repo, checkout the files:
curl -s https://raw.githubusercontent.com/sskras/.files/main/.local/Makefile | make -f- install
